---
import Layout from "@/layouts/Layout.astro";
import { Button } from "@/components/ui/button";

import {
  Card,
  CardContent,
  CardDescription,
  CardFooter,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import Sidebar from "@/components/Sidebar.astro";

const list = await Astro.locals.pb
  .collection("lists")
  .getOne(Astro.params.id || "");
---

<Layout>
  <div class="flex h-full">
    <Sidebar />
    <main class="flex-1">
      <div class="flex items-start justify-between gap-2">
        <CardHeader>
          <CardTitle className={`${list.name ? "" : "opacity-50"}`}>
            {list.name || "Unnamed List"}
          </CardTitle>
          <CardDescription
            className={`${list.description ? "" : "opacity-50"}`}
          >
            {list.description || "Description"}
          </CardDescription>
          <div class="flex gap-2">
            <form
              action={`${Astro.url.origin}/api/lists/${list.id}/delete`}
              method="post"
            >
              <Button size="sm">Delete</Button>
            </form>
            <Button size="sm">Share</Button>
          </div>
        </CardHeader>
      </div>
      <CardContent>this is all the gear</CardContent>
    </main>
  </div>
</Layout>
